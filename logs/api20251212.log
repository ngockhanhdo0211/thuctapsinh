2025-12-12 09:30:42.210 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-12 09:30:42.264 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-12 09:30:42.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-12 09:30:42.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-12 09:30:42.309 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-12 09:30:42.336 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-12 09:30:42.414 +07:00 [INF] User profile is available. Using 'C:\Users\Do Ngoc Khanh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-12 09:30:42.448 +07:00 [WRN] Overriding address(es) 'http://localhost:5079'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-12-12 09:30:42.493 +07:00 [INF] Now listening on: http://localhost:5079
2025-12-12 09:30:42.495 +07:00 [INF] Now listening on: https://localhost:7166
2025-12-12 09:30:42.496 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-12 09:30:42.496 +07:00 [INF] Hosting environment: Development
2025-12-12 09:30:42.496 +07:00 [INF] Content root path: C:\Users\Do Ngoc Khanh\tts\UnifiedLearningApi\UnifiedLearningApi
2025-12-12 09:31:01.344 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/index.html - null null
2025-12-12 09:31:01.469 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/index.html - 200 null text/html;charset=utf-8 126.9343ms
2025-12-12 09:31:01.617 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - null null
2025-12-12 09:31:01.746 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 128.3897ms
2025-12-12 09:36:00.074 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 09:36:00.264 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 09:36:00.387 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 09:36:01.256 +07:00 [INF] Executed DbCommand (66ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 09:36:01.943 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-12 09:36:01.983 +07:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedLearningApi.DTOs.Auth.AuthResponseDto'.
2025-12-12 09:36:02.004 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 1608.8022ms
2025-12-12 09:36:02.008 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 09:36:02.018 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 200 null application/json; charset=utf-8 1946.9658ms
2025-12-12 09:36:40.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 09:36:40.337 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:36:40.351 +07:00 [INF] Route matched with {action = "GetAll", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 09:36:40.551 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
2025-12-12 09:36:40.583 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UnifiedLearningApi.DTOs.PostDto, UnifiedLearningApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-12 09:36:40.595 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi) in 242.288ms
2025-12-12 09:36:40.598 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:36:40.600 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 200 null application/json; charset=utf-8 345.7668ms
2025-12-12 09:37:18.206 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/2 - null null
2025-12-12 09:37:18.222 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-12 09:37:18.226 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 09:37:18.229 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/2 - 403 0 null 22.8456ms
2025-12-12 09:37:36.265 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/2 - null null
2025-12-12 09:37:36.280 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-12 09:37:36.286 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-12 09:37:36.288 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/2 - 401 0 null 22.6409ms
2025-12-12 09:37:40.395 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/2 - null null
2025-12-12 09:37:40.400 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-12 09:37:40.402 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-12 09:37:40.404 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/2 - 401 0 null 8.7461ms
2025-12-12 09:38:20.074 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/2 - null null
2025-12-12 09:38:20.078 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-12 09:38:20.079 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 09:38:20.081 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/2 - 403 0 null 7.437ms
2025-12-12 09:38:25.120 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/2 - null null
2025-12-12 09:38:25.125 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-12 09:38:25.128 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 09:38:25.129 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/2 - 403 0 null 9.4845ms
2025-12-12 09:46:07.420 +07:00 [INF] Application is shutting down...
2025-12-12 09:46:24.478 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-12 09:46:24.528 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-12 09:46:24.533 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-12 09:46:24.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-12 09:46:24.568 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-12 09:46:24.578 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-12 09:46:24.622 +07:00 [INF] User profile is available. Using 'C:\Users\Do Ngoc Khanh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-12 09:46:24.647 +07:00 [WRN] Overriding address(es) 'http://localhost:5079'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-12-12 09:46:24.678 +07:00 [INF] Now listening on: http://localhost:5079
2025-12-12 09:46:24.680 +07:00 [INF] Now listening on: https://localhost:7166
2025-12-12 09:46:24.680 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-12 09:46:24.681 +07:00 [INF] Hosting environment: Development
2025-12-12 09:46:24.681 +07:00 [INF] Content root path: C:\Users\Do Ngoc Khanh\tts\UnifiedLearningApi\UnifiedLearningApi
2025-12-12 09:46:29.885 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/index.html - null null
2025-12-12 09:46:30.054 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/index.html - 200 null text/html;charset=utf-8 172.4263ms
2025-12-12 09:46:30.353 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - null null
2025-12-12 09:46:30.530 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 175.983ms
2025-12-12 09:46:53.401 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 09:46:53.450 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 09:46:53.482 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 09:46:54.103 +07:00 [INF] Executed DbCommand (102ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 09:46:54.814 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-12 09:46:54.862 +07:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedLearningApi.DTOs.Auth.AuthResponseDto'.
2025-12-12 09:46:54.884 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 1395.0526ms
2025-12-12 09:46:54.886 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 09:46:54.893 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 200 null application/json; charset=utf-8 1492.9902ms
2025-12-12 09:47:15.303 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 09:47:15.396 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:47:15.405 +07:00 [INF] Route matched with {action = "GetAll", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 09:47:15.638 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
2025-12-12 09:47:15.685 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UnifiedLearningApi.DTOs.PostDto, UnifiedLearningApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-12 09:47:15.692 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi) in 283.7142ms
2025-12-12 09:47:15.708 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:47:15.709 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 200 null application/json; charset=utf-8 406.086ms
2025-12-12 09:47:24.568 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/2 - null null
2025-12-12 09:47:24.579 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.Delete (UnifiedLearningApi)'
2025-12-12 09:47:24.590 +07:00 [INF] Route matched with {action = "Delete", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 09:47:24.649 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-12 09:47:24.717 +07:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Posts]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-12 09:47:24.733 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-12 09:47:24.734 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.Delete (UnifiedLearningApi) in 140.6308ms
2025-12-12 09:47:24.737 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.Delete (UnifiedLearningApi)'
2025-12-12 09:47:24.739 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/2 - 204 null null 170.8554ms
2025-12-12 09:49:01.372 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 09:49:01.383 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:49:01.385 +07:00 [INF] Route matched with {action = "GetAll", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 09:49:01.399 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
2025-12-12 09:49:01.405 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UnifiedLearningApi.DTOs.PostDto, UnifiedLearningApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-12 09:49:01.406 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi) in 17.2808ms
2025-12-12 09:49:01.407 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:49:01.408 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 200 null application/json; charset=utf-8 35.8835ms
2025-12-12 09:50:56.580 +07:00 [INF] Application is shutting down...
2025-12-12 09:51:30.211 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-12 09:51:30.261 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-12 09:51:30.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-12 09:51:30.267 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-12 09:51:30.291 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-12 09:51:30.300 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-12 09:51:30.342 +07:00 [INF] User profile is available. Using 'C:\Users\Do Ngoc Khanh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-12 09:51:30.366 +07:00 [WRN] Overriding address(es) 'http://localhost:5079'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-12-12 09:51:30.397 +07:00 [INF] Now listening on: http://localhost:5079
2025-12-12 09:51:30.399 +07:00 [INF] Now listening on: https://localhost:7166
2025-12-12 09:51:30.399 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-12 09:51:30.399 +07:00 [INF] Hosting environment: Development
2025-12-12 09:51:30.400 +07:00 [INF] Content root path: C:\Users\Do Ngoc Khanh\tts\UnifiedLearningApi\UnifiedLearningApi
2025-12-12 09:51:34.117 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/index.html - null null
2025-12-12 09:51:34.251 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/index.html - 200 null text/html;charset=utf-8 138.1021ms
2025-12-12 09:51:34.314 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - null null
2025-12-12 09:51:34.466 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.5253ms
2025-12-12 09:52:30.566 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/register - application/json 77
2025-12-12 09:52:30.668 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Register (UnifiedLearningApi)'
2025-12-12 09:52:30.697 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(UnifiedLearningApi.DTOs.Auth.RegisterDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 09:52:31.173 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [User] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-12 09:52:31.786 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User] ([Email], [PasswordHash], [Role])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-12-12 09:52:31.837 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-12-12 09:52:31.844 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Register (UnifiedLearningApi) in 1140.1636ms
2025-12-12 09:52:31.849 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Register (UnifiedLearningApi)'
2025-12-12 09:52:31.855 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/register - 200 null text/plain; charset=utf-8 1288.5704ms
2025-12-12 09:53:00.566 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 09:53:00.574 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 09:53:00.583 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 09:53:00.837 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 09:53:01.272 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-12 09:53:01.278 +07:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedLearningApi.DTOs.Auth.AuthResponseDto'.
2025-12-12 09:53:01.298 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 712.4272ms
2025-12-12 09:53:01.304 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 09:53:01.308 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 200 null application/json; charset=utf-8 742.142ms
2025-12-12 09:53:51.407 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 09:53:51.420 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:53:51.430 +07:00 [INF] Route matched with {action = "GetAll", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 09:53:51.590 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
2025-12-12 09:53:51.630 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UnifiedLearningApi.DTOs.PostDto, UnifiedLearningApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-12 09:53:51.640 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi) in 204.5941ms
2025-12-12 09:53:51.642 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 09:53:51.643 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 200 null application/json; charset=utf-8 236.2942ms
2025-12-12 09:54:26.579 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Posts - application/json 63
2025-12-12 09:54:26.589 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2025-12-12 09:54:26.593 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 09:54:26.596 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Posts - 403 0 null 16.5931ms
2025-12-12 09:54:46.687 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Posts - application/json 63
2025-12-12 09:54:46.691 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2025-12-12 09:54:46.693 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 09:54:46.697 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Posts - 403 0 null 9.2759ms
2025-12-12 09:55:22.426 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Posts - application/json 53
2025-12-12 09:55:22.428 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2025-12-12 09:55:22.435 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-12 09:55:22.437 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Posts - 401 0 null 11.8239ms
2025-12-12 09:56:53.951 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Posts - application/json 53
2025-12-12 09:56:53.955 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2025-12-12 09:56:53.956 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 09:56:53.957 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Posts - 403 0 null 6.0235ms
2025-12-12 10:01:45.542 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Posts - application/json 53
2025-12-12 10:01:45.545 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2025-12-12 10:01:45.546 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 10:01:45.547 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Posts - 403 0 null 4.5237ms
2025-12-12 10:02:01.222 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/index.html - null null
2025-12-12 10:02:01.228 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/index.html - 200 null text/html;charset=utf-8 5.5444ms
2025-12-12 10:02:01.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - null null
2025-12-12 10:02:01.298 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.7965ms
2025-12-12 10:02:20.636 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 10:02:20.640 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:02:20.641 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 10:02:20.681 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 10:02:20.897 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-12-12 10:02:20.916 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 273.3828ms
2025-12-12 10:02:20.918 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:02:20.919 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 401 null application/problem+json; charset=utf-8 283.3915ms
2025-12-12 10:02:41.621 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 10:02:41.624 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:02:41.625 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 10:02:41.635 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 10:02:41.850 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-12-12 10:02:41.852 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 225.7079ms
2025-12-12 10:02:41.855 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:02:41.856 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 401 null application/problem+json; charset=utf-8 235.3622ms
2025-12-12 10:04:10.702 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 10:04:10.709 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:04:10.712 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 10:04:10.726 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 10:04:10.950 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-12 10:04:10.953 +07:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedLearningApi.DTOs.Auth.AuthResponseDto'.
2025-12-12 10:04:10.954 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 238.5117ms
2025-12-12 10:04:10.955 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:04:10.957 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 200 null application/json; charset=utf-8 254.9771ms
2025-12-12 10:04:54.953 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Posts - application/json 53
2025-12-12 10:04:54.957 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.Create (UnifiedLearningApi)'
2025-12-12 10:04:54.963 +07:00 [INF] Route matched with {action = "Create", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(UnifiedLearningApi.DTOs.PostCreateDto) on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 10:04:54.994 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Posts] ([Content], [Title])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-12-12 10:04:55.006 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'UnifiedLearningApi.DTOs.PostDto'.
2025-12-12 10:04:55.035 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.Create (UnifiedLearningApi) in 69.2491ms
2025-12-12 10:04:55.040 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.Create (UnifiedLearningApi)'
2025-12-12 10:04:55.041 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Posts - 201 null application/json; charset=utf-8 88.1609ms
2025-12-12 10:05:01.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 10:05:01.370 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 10:05:01.371 +07:00 [INF] Route matched with {action = "GetAll", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 10:05:01.382 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
2025-12-12 10:05:01.388 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UnifiedLearningApi.DTOs.PostDto, UnifiedLearningApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-12 10:05:01.391 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi) in 17.2114ms
2025-12-12 10:05:01.393 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 10:05:01.395 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 200 null application/json; charset=utf-8 28.4991ms
2025-12-12 10:05:20.364 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/3 - null null
2025-12-12 10:05:20.372 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.Delete (UnifiedLearningApi)'
2025-12-12 10:05:20.383 +07:00 [INF] Route matched with {action = "Delete", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 10:05:20.416 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
WHERE [p].[Id] = @__p_0
2025-12-12 10:05:20.444 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Posts]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-12 10:05:20.458 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-12 10:05:20.460 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.Delete (UnifiedLearningApi) in 72.6362ms
2025-12-12 10:05:20.463 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.Delete (UnifiedLearningApi)'
2025-12-12 10:05:20.465 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/3 - 204 null null 100.6334ms
2025-12-12 10:05:29.261 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 10:05:29.264 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 10:05:29.265 +07:00 [INF] Route matched with {action = "GetAll", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller UnifiedLearningApi.Controllers.PostsController (UnifiedLearningApi).
2025-12-12 10:05:29.272 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Content], [p].[Title]
FROM [Posts] AS [p]
2025-12-12 10:05:29.275 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UnifiedLearningApi.DTOs.PostDto, UnifiedLearningApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-12 10:05:29.277 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi) in 9.9217ms
2025-12-12 10:05:29.278 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.PostsController.GetAll (UnifiedLearningApi)'
2025-12-12 10:05:29.280 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 200 null application/json; charset=utf-8 19.2617ms
2025-12-12 10:51:20.051 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7166/api/Posts - null null
2025-12-12 10:51:20.205 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '12/12/2025 3:24:10 AM', Current time (UTC): '12/12/2025 3:51:20 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-12-12 10:51:20.350 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '12/12/2025 3:24:10 AM', Current time (UTC): '12/12/2025 3:51:20 AM'.
2025-12-12 10:51:20.359 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-12-12 10:51:20.371 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-12 10:51:20.373 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7166/api/Posts - 401 0 null 325.4773ms
2025-12-12 10:54:35.080 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7166/api/Auth/login - application/json 58
2025-12-12 10:54:35.099 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '12/12/2025 3:24:10 AM', Current time (UTC): '12/12/2025 3:54:35 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-12-12 10:54:35.106 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '12/12/2025 3:24:10 AM', Current time (UTC): '12/12/2025 3:54:35 AM'.
2025-12-12 10:54:35.110 +07:00 [INF] Executing endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:54:35.125 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UnifiedLearningApi.DTOs.Auth.LoginDto) on controller UnifiedLearningApi.Controllers.AuthController (UnifiedLearningApi).
2025-12-12 10:54:35.369 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[PasswordHash], [t].[Role], [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Role]
    FROM [User] AS [u]
    WHERE [u].[Email] = @__dto_Email_0
) AS [t]
LEFT JOIN [RefreshTokens] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id]
2025-12-12 10:54:35.774 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-12 10:54:35.781 +07:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedLearningApi.DTOs.Auth.AuthResponseDto'.
2025-12-12 10:54:35.788 +07:00 [INF] Executed action UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi) in 658.278ms
2025-12-12 10:54:35.790 +07:00 [INF] Executed endpoint 'UnifiedLearningApi.Controllers.AuthController.Login (UnifiedLearningApi)'
2025-12-12 10:54:35.796 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7166/api/Auth/login - 200 null application/json; charset=utf-8 715.3418ms
2025-12-12 10:54:58.782 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7166/api/Posts/3 - null null
2025-12-12 10:54:58.793 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-12 10:54:58.800 +07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-12 10:54:58.809 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7166/api/Posts/3 - 403 0 null 27.3505ms
2025-12-12 11:46:17.039 +07:00 [INF] Application is shutting down...
